<h2 id="questionsAnchor">{{ I18ns.statistics.globalPerformance.teamsTable.title }}</h2>
<p class="mb-4 alto-grey">{{ I18ns.statistics.globalPerformance.teamsTable.subtitle }}</p>

<div class="row mb-4">
  <div class="col-8">
    <alto-dropdown-filter
      class="text-start"
      [data]="teamStore.teams.value"
      [displayLabel]="'shortName'"
      [returnValue]="'id'"
      [placeholder]="I18ns.programs.programs.filters.team"
      [isColored]="true"
      [multiple]="false"
      (selectChange)="getTeamsFiltered({ teams: $event })"
      class="me-3"
    ></alto-dropdown-filter>
    <alto-dropdown-filter
      class="me-3"
      [data]="programsStore.programs.value"
      [displayLabel]="'name'"
      [returnValue]="'id'"
      [placeholder]="I18ns.programs.questions.filters.programs"
      (selectChange)="getTeamsFiltered({ programs: $event })"
    ></alto-dropdown-filter>
    <alto-dropdown-filter
      class="me-3"
      [data]="programsStore.tags.value"
      [returnValue]="'id'"
      [displayLabel]="'name'"
      [placeholder]="I18ns.programs.questions.filters.tags"
      (selectChange)="getTeamsFiltered({ tags: $event })"
    ></alto-dropdown-filter>
  </div>
  <div class="col-4 text-end">
    <alto-search (searchChange)="getTeamsFiltered({ search: $event })"></alto-search>
  </div>
</div>

<div class="table-panel">
  <table class="table">
    <thead>
      <tr>
        <th scope="col" class="w-20">{{ I18ns.statistics.globalPerformance.teamsTable.columns.name }}</th>
        <th scope="col" class="w-10 text-center">
          {{ I18ns.statistics.globalPerformance.teamsTable.columns.global }}
        </th>
        <th scope="col" class="w-35">
          {{ I18ns.statistics.globalPerformance.teamsTable.columns.lessMasteredPrograms }}
        </th>
        <th scope="col" class="w-30">
          {{ I18ns.statistics.globalPerformance.teamsTable.columns.lessMasteredTags }}
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let team of paginatedTeams" class="align-middle">
        <td class="fw-medium alto-text-color">
          {{ team.label }}
        </td>
        <td class="text-center">{{ team.score + ' %' }}</td>
        <td class="w-35">
          <div class="text-nowrap overflow-hidden">
            <span *ngFor="let prg of team.programs || [] | sort : 'asc' : 'score'" class="alto-badge me-2">
              {{ prg.label }}
            </span>
          </div>
        </td>
        <td class="w-30">
          <div class="text-nowrap overflow-hidden">
            <span *ngFor="let tg of team.tags || [] | sort : 'asc' : 'score'" class="alto-badge me-2">
              {{ tg.label }}
            </span>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
  <alto-pagination
    [collectionSize]="teams.length"
    (pageChange)="changeTeamsPage($event)"
    [pageSize]="teamsPageSize"
    [maxSize]="5"
    [page]="teamsPage"
  ></alto-pagination>
</div>
