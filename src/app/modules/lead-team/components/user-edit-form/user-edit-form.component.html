<div class="text-end px-4 mt-3">
  <button type="button" class="btn-close" aria-label="Close" (click)="activeOffcanvas.dismiss()"></button>
</div>
<div class="p-4 border-bottom mb-4">
  <h2>{{ I18ns.leadTeam.members.forms.edition.title }}</h2>
  <p class="fs-7">{{ I18ns.leadTeam.members.forms.edition.subtitle }}</p>
</div>
<div class="offcanvas-body px-4 border-bottom">
  <alto-img-badge [url]="user.pictureUrl" [size]="72"></alto-img-badge>
  <h4 class="mt-3">
    {{ !user.firstname || !user.lastname ? user.username : user.firstname + ' ' + user.lastname }}
  </h4>
  <p>{{ user.email }}</p>
</div>
<div class="offcanvas-body px-4 h-100">
  <form *ngIf="userForm" [formGroup]="userForm">
    <label class="form-label">{{ I18ns.leadTeam.members.forms.edition.teams }}</label>
    <ng-select
      [items]="teams"
      [multiple]="false"
      bindLabel="shortName"
      [placeholder]="I18ns.leadTeam.members.forms.edition.teamsPlaceholder"
      [closeOnSelect]="true"
      [selectableGroup]="true"
      bindValue="id"
      formControlName="team"
    >
      <ng-template ng-label-tmp let-item="item" let-clear="clear">
        <div class="badge rounded-pill p-2" [style.backgroundColor]="item.id | uuid2color">
          <span>{{ item.shortName }}</span>
        </div>
      </ng-template>
      <ng-template ng-option-tmp let-item="item" let-index="index" let-search="searchTerm">
        <span class="badge rounded-pill p-2" [style.backgroundColor]="item.id | uuid2color">
          {{ item.shortName }}
        </span>
      </ng-template>
    </ng-select>
    <label class="form-label mt-4">{{ I18ns.leadTeam.members.forms.edition.type }}</label>
    <select class="form-select" formControlName="type" id="type">
      <option value="company-user">{{ I18ns.leadTeam.members.forms.edition.standardType }}</option>
      <option value="company-admin">{{ I18ns.leadTeam.members.forms.edition.adminType }}</option>
    </select>
    <p>{{ I18ns.leadTeam.members.forms.edition.typeSubtitle }}</p>
    <button
      type="button"
      class="btn btn-outline-secondary my-4 me-3"
      aria-label="Close"
      (click)="activeOffcanvas.dismiss()"
    >
      {{ I18ns.shared.cancel }}
    </button>
    <input
      type="submit"
      class="btn btn-primary my-4"
      [disabled]="!userForm.valid"
      [value]="I18ns.shared.save"
      (click)="editUser()"
    />
  </form>
</div>
