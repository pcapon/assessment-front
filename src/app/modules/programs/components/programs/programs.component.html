<h1 class="mt-4">{{ I18ns.programs.title }}</h1>
<p class="mb-4">{{ I18ns.programs.subtitle }}</p>
<div class="pb-4 border-bottom">
  <button type="button" class="btn btn-outline-secondary me-4">{{ I18ns.programs.programs.title }}</button>
  <button type="button" class="btn btn-outline-secondary me-4">{{ I18ns.programs.questions.title }}</button>
  <button type="button" class="btn btn-outline-secondary me-4">
    {{ I18ns.programs.awaitQuestions.title }}
  </button>
  <button type="button" class="btn btn-outline-secondary me-4">{{ I18ns.programs.tags.title }}</button>
</div>
<div class="py-4 border-bottom">
  <a type="button" class="btn btn-primary float-end" [routerLink]="AltoRoutes.programsCreate">
    {{ I18ns.programs.programs.createProgram }}
  </a>
  <h1>{{ I18ns.programs.programs.title }}</h1>
  <p class="mb-4">{{ I18ns.programs.programs.subtitle }}</p>

  <div class="row mb-3">
    <!-- <div class="col-6 col-xl-4 col-xxxl-3" *ngFor="let prog of programs"> -->
    <div class="col-4 mb-3" *ngFor="let prog of programs">
      <alto-program-card [displayToggle]="true" [program]="prog"></alto-program-card>
    </div>
  </div>
  <ngb-pagination
    [collectionSize]="programsCount"
    [(page)]="programsPage"
    (pageChange)="changeProgramPage()"
    [pageSize]="programPageSize"
    [maxSize]="10"
    aria-label="Default pagination"
  ></ngb-pagination>
</div>
<div class="py-4 border-bottom">
  <button type="button" class="btn btn-primary float-end" (click)="openQuestionForm()">
    {{ I18ns.programs.questions.createQuestion }}
  </button>
  <h1>{{ I18ns.programs.questions.title }}</h1>
  <p class="mb-4">{{ I18ns.programs.questions.subtitle }}</p>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">{{ I18ns.programs.questions.table.question }}</th>
        <th scope="col">{{ I18ns.programs.questions.table.score }}</th>
        <th scope="col">{{ I18ns.programs.questions.table.author }}</th>
        <th scope="col">{{ I18ns.programs.questions.table.tags }}</th>
        <th scope="col">{{ I18ns.programs.questions.table.programs }}</th>
        <th></th>
      </tr>
    </thead>
    <tbody *ngIf="!isQuestionsLoading">
      <tr *ngFor="let question of questions">
        <th scope="row" class="col-3">
          {{ question.title }}
        </th>
        <td>
          <span class="badge rounded-pill" [class]="72 | pillColor">{{
            getQuestionScore(question.id) | percent
          }}</span>
        </td>
        <td class="col-2">
          <alto-img-badge [url]="getUser(question.createdBy)?.pictureUrl"></alto-img-badge>
        </td>
        <td *ngIf="question.tags && question.tags.length > 0">
          <alto-colored-pill-list [data]="question.tags" [limit]="3"></alto-colored-pill-list>
        </td>
        <td *ngIf="!question.tags || question.tags.length < 1">-</td>
        <td *ngIf="question.programs && question.programs.length > 0">
          <alto-colored-pill-list [data]="question.programs" [limit]="3"></alto-colored-pill-list>
        </td>
        <td *ngIf="!question.programs || question.programs.length < 1">-</td>
        <td class="pointer pe-auto" (click)="openQuestionForm(question)">
          <i class="fs-5 bi bi-pencil-fill"></i>
        </td>
      </tr>
    </tbody>
  </table>
  <ngb-pagination
    [collectionSize]="questionsCount"
    [(page)]="questionsPage"
    (pageChange)="changeQuestionsPage()"
    [pageSize]="questionsPageSize"
    [maxSize]="10"
    aria-label="Default pagination"
  ></ngb-pagination>
</div>
<div class="py-4 border-bottom">
  <div>
    <h1>{{ I18ns.programs.awaitQuestions.title }}</h1>
    <p class="mb-4">{{ I18ns.programs.awaitQuestions.subtitle }}</p>
  </div>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">{{ I18ns.programs.awaitQuestions.table.question }}</th>
        <th scope="col">{{ I18ns.programs.awaitQuestions.table.author }}</th>
        <th></th>
      </tr>
    </thead>
    <tbody *ngIf="!isSubmittedQuestionsLoading">
      <tr *ngFor="let question of submittedQuestions">
        <th scope="row">{{ question.title }}</th>
        <td>
          <alto-img-badge [url]="getUser(question.createdBy)?.pictureUrl"></alto-img-badge>
        </td>
        <td>
          <i class="fs-5 bi bi-pencil-fill"></i>
        </td>
      </tr>
    </tbody>
  </table>
  <ngb-pagination
    [collectionSize]="submittedQuestionsCount"
    [(page)]="submittedQuestionsPage"
    (pageChange)="changeSubmittedQuestionsPage()"
    [pageSize]="submittedQuestionsPageSize"
    [maxSize]="10"
    aria-label="Default pagination"
  ></ngb-pagination>
</div>
<div class="py-4 border-bottom">
  <button type="button" class="btn btn-primary float-end" (click)="openTagForm()">
    {{ I18ns.programs.tags.createTag }}
  </button>
  <h1>{{ I18ns.programs.tags.title }}</h1>
  <p class="mb-4">{{ I18ns.programs.tags.subtitle }}</p>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">{{ I18ns.programs.tags.table.name }}</th>
        <th scope="col">{{ I18ns.programs.tags.table.score }}</th>
        <th scope="col">{{ I18ns.programs.tags.table.author }}</th>
        <th scope="col">{{ I18ns.programs.tags.table.associatedPrograms }}</th>
        <th></th>
      </tr>
    </thead>
    <tbody *ngIf="!isTagsLoading">
      <tr *ngFor="let tag of tags">
        <th scope="row">{{ tag.name }}</th>
        <td>
          <span class="badge rounded-pill" [class]="70 | pillColor">42%</span>
        </td>
        <td>
          <alto-img-badge [url]="getUser(tag.createdBy)?.pictureUrl"></alto-img-badge>
        </td>
        <td *ngIf="!isTagProgramsLoading">
          <alto-colored-pill-list [data]="getTagPrograms(tag.id)" [limit]="5"></alto-colored-pill-list>
        </td>
        <td class="pointer pe-auto" (click)="openTagForm(tag)">
          <i class="fs-5 bi bi-pencil-fill"></i>
        </td>
      </tr>
    </tbody>
  </table>
  <ngb-pagination
    [collectionSize]="tagsCount"
    [(page)]="tagsPage"
    (pageChange)="changeTagsPage()"
    [pageSize]="tagsPageSize"
    [maxSize]="10"
    aria-label="Default pagination"
  ></ngb-pagination>
</div>
