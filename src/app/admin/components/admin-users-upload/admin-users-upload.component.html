<h2>Upload a CSV of users following the format : <i>email,teamShortName</i></h2>
<p>for {{company.name}}</p>

<br><br>

<div class="row">
  <div class="col-auto">
    <input type="file" (change)="onFileSelected($event)" class="form-control" *ngIf="csvData.length === 0">
  </div>
</div>

<table *ngIf="csvData.length > 0">
  <thead>
    <tr>
      <th>email</th>
      <th>team ShortName</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let row of csvData">
      <!-- <td *ngIf="!reg.test(row.email)" class="text-danger">{{row.email}} </td><td *ngIf="!!reg.test(row.email)">{{row.email}} </td> -->
      <!-- <td><pre>{{row |json}}</pre></td> -->
      <td><pre>{{row.email}}</pre></td>
      <td>{{row.teamId}}
        <select [(ngModel)]="row.teamId">
          <option *ngFor="let team of teams" [value]="team.id">{{team.shortName}}</option>
        </select>        
      </td>
    </tr>
  </tbody>
</table>

<button class="btn btn-primary" *ngIf="csvData.length > 0">Upload</button>
<button class="btn btn-danger" *ngIf="csvData.length > 0" (click)="csvData = []">Clear</button>


<table>
  <thead>
    <tr>
      <th>email</th>
      <th>teamId</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let row of teams">
      <pre>{{ row| json}}</pre>
    </tr>
  </tbody>  
</table>